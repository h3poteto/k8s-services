repositories:
  - name: incubator
    url: http://storage.googleapis.com/kubernetes-charts-incubator

releases:
  - name: kube2iam
    namespace: kube-system
    chart: stable/kube2iam
    version: 0.10.0
    values:
      - rbac:
          create: true
      - host:
          iptables: true
          interface: eni+
      - extraArgs:
          auto-discover-base-arn: ""
          auto-discover-default-role: true
      - image:
          # I'm waiting for https://github.com/jtblin/kube2iam/issues/178
          tag: 0.10.4
  - name: alb-ingress-controller
    namespace: kube-system
    chart: incubator/aws-alb-ingress-controller
    version: 0.1.4
    values:
      - rbac:
          create: true
      - clusterName: base-prd
      - awsRegion: ap-northeast-1
      - awsVpcID: vpc-fb354b9c
      - podAnnotations:
          iam.amazonaws.com/role: alb-ingress-controller-role
      - image:
          tag: v1.1.1
  - name: prometheus-node-exporter
    namespace: monitoring
    chart: stable/prometheus-node-exporter
    version: 1.4.2
    values:
      - rbac:
          create: true
          pspEnabled: true
      - podLabels:
          prometheus.io/scrape: 'true'
          prometheus.io/port: '9100'
      - service:
          type: ClusterIP
          port: 9100
  - name: kube-state-metrics
    namespace: monitoring
    chart: stable/kube-state-metrics
    version: 1.2.0
    values:
      - rbac:
          create: true
      - service:
          port: 8080
      - podAnnotations:
          prometheus.io/scrape: 'true'
          prometheus.io/port: '8080'
  # Note: Now I don't use metrics-server,
  # because it only use horizontal pod autoscale.
  # In monitoring, it is not useful, because it is not support prometheus endpoint.
  # - name: metrics-server
  #   namespace: kube-system
  #   chart: stable/metrics-server
  #   version: 2.5.1
  #   values:
  #     - rbac:
  #         create: true
  #         pspEnabled: true
  #     - serviceAccount:
  #         create: true
  #     - image:
  #         tag: v0.3.1
  #     - args: ["--kubelet-insecure-tls"]

