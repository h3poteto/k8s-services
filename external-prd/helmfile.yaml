repositories:
  - name: stable
    url: https://kubernetes-charts.storage.googleapis.com
  - name: incubator
    url: https://kubernetes-charts-incubator.storage.googleapis.com
  - name: h3poteto-stable
    url: https://h3poteto.github.io/charts/stable

releases:
  - name: alb-ingress-controller
    namespace: kube-system
    chart: incubator/aws-alb-ingress-controller
    version: 0.1.14
    values:
      - rbac:
          create: true
          serviceAccountAnnotations:
            eks.amazonaws.com/role-arn: arn:aws:iam::564677439943:role/alb-ingress-controller-role
      - clusterName: external-prd-20200329
      - awsRegion: ap-northeast-1
      - awsVpcID: vpc-fb354b9c
      - podAnnotations:
          iam.amazonaws.com/role: alb-ingress-controller-role
      - image:
          tag: v1.1.6
  - name: prometheus-node-exporter
    namespace: monitoring
    chart: stable/prometheus-node-exporter
    version: 1.9.1
    values:
      - rbac:
          create: true
          pspEnabled: true
      - podLabels:
          prometheus.io/scrape: 'true'
          prometheus.io/port: '9100'
      - service:
          type: ClusterIP
          port: 9100
  - name: kube-state-metrics
    namespace: monitoring
    chart: stable/kube-state-metrics
    version: 2.8.2
    values:
      - rbac:
          create: true
      - service:
          port: 8080
      - podAnnotations:
          prometheus.io/scrape: 'true'
          prometheus.io/port: '8080'
  - name: kms-secrets
    namespace: kube-system
    chart: h3poteto-stable/kms-secrets
    version: 0.1.2
    values:
      - rbac:
          create: true
          serviceAccount:
            annotations:
              eks.amazonaws.com/role-arn: arn:aws:iam::564677439943:role/kms-secrets-role
  # Note: Now I don't use metrics-server,
  # because it only use horizontal pod autoscale.
  # In monitoring, it is not useful, because it is not support prometheus endpoint.
  # - name: metrics-server
  #   namespace: kube-system
  #   chart: stable/metrics-server
  #   version: 2.5.1
  #   values:
  #     - rbac:
  #         create: true
  #         pspEnabled: true
  #     - serviceAccount:
  #         create: true
  #     - image:
  #         tag: v0.3.1
  #     - args: ["--kubelet-insecure-tls"]

